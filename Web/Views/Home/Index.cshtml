@model IEnumerable<Core.Models.Story>

@{ViewBag.Title = "British Humour";}

<!-- Green Message -->
@if (ViewBag.GreenMessage == true) {
    <div class="alert-success" align="center">
        @ViewBag.Message
    </div>
}

<!-- Red Message -->
@if (ViewBag.RedMessage == true) {
    <div class="alert-danger" align="center">
        @ViewBag.Message
    </div>
}

<table class="table">
    <tr>
        <th></th>
        <th>
            @*@Html.ActionLink("Rating", "Index", new { sortOrder = "ratingDescending" })*@
            <a href="/Home/Index?sortOrder=ratingDescending" title="Sort by rating with highest first">Rating</a>
        </th>
        <th></th>
        <th>@Html.ActionLink("Date", "Index", new { sortOrder = "dateCreatedDescending" }, new {title="Sort by date with newest first"})</th>
        <th></th>
    </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                <!-- If sortOrder is null then the helper handles this-->
                @Html.ActionLink("^^^", "Vote", new { storyID = item.ID, sortOrder = Request.QueryString["sortOrder"]}, new {title = "Vote for me!"} )
            </td>
            <td>@item.Rating</td>
            <td>@if (item.Content != null) { @item.Content }
                @if (item.VideoURL != null) { <iframe width="210" height="158" src="@item.VideoURL" frameborder="0" allowfullscreen></iframe>}
                @if (item.ImageURL != null) { <img src="@item.ImageURL" /> }
            </td>
        <td>@String.Format("{0:d-MMM-yy H:m:s}", item.CreatedAt)</td>
    </tr>
    }
</table>
